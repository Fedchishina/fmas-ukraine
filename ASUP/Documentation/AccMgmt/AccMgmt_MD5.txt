****************************************************************
* Использование алгоритма MD5 в системе разграничения доступа. *
* Валентин Кропов, 07.11.2005                                  *
****************************************************************

1. Система разграничения доступа без использования MD5.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для того чтобы отключить функцию использования алгоритма MD5 в системе разграничения доступа (СРД) необходимо в конфигурационном файле config.ini в секции params установить значение параметра:

UseMD5=F

или вообще убрать этот параметр из конфигурационного файла.

При этом ядро системы разграничения доступа (AccMgmtBpl) при регистрации (Login) в различных подсистемах сравнивает введенные имя и пароль со значениями NAME и PASSWD соответственно в таблице USERS.

Графический интерфейс системы разграничения доступа (AccessFMAS) при добавлении/редактировании пользователя записывает в БД нешифрованный пароль в поле PASSWD в таблицу USERS.

2. Система разграничения доступа с использованием MD5.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для того чтобы включить функцию использования алгоритма MD5 в системе разграничения доступа (СРД) необходимо в конфигурационном файле config.ini в секции params установить значение параметра:

UseMD5=T

Необходимо также убедится в наличии файла MD5.bpl в корневом каталоге FMAS-WIN\Application.

При этом ядро системы разграничения доступа (AccMgmtBpl) при регистрации (Login) в различных подсистемах преобразовывает введенный пароль в зашифрованный ХЕШ MD5 и сравнивает полученное значение с полем PASSWD_MD5_HASH в таблице USERS.

Графический интерфейс системы разграничения доступа (AccessFMAS) при добавлении/редактировании пользователя записывает в БД зашифрованный ХЕШ-пароль в поле PASSWD_MD5_HASH в таблицу USERS.

3. Автоматическая генерация зашифрованных ХЕШ паролей для уже существующих пользователей.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для того чтобы произвести автоматическую генерацию, необходимо выполнить пункт "Сгенерировать ХЕШ-пароли" из меню "Работа". При этом для каждого пользователя из таблицы USERS для поля PASSWD генерируется зашифрованный ХЕШ-пароль и записывается в поле PASSWD_MD5_HASH.

4. MD5 API.
~~~~~~~~~~

Преобразование нешифрованного пароля в ХЕШ-пароль производится при помощи функции:

function StrMD5(Buffer : String): string;

из модуля uMD5, который включен в пакет MD5.bpl

5. MD5 UDF.
~~~~~~~~~~

Для того чтобы получить возможность получать ХЕШ-пароли под Firebird необходимо установить UDF-пакет RFUNC версии  2.1.3.1 RC 25.11.2003. Наименование соответствующей функции - "md5sum", описание на сайте:

http://rfunc.sourceforge.net/rfunc.htm